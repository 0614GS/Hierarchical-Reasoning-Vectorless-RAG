{"node_id": "b561ce", "title": "Dangling tool call repair", "path": "harness > Agent harness capabilities > Dangling tool call repair", "content": "The harness fixes message history when tool calls are interrupted or cancelled before receiving results.\n\n**The problem:**\n\n* Agent requests tool call: \"Please run X\"\n* Tool call is interrupted (user cancels, error, etc.)\n* Agent sees tool\\_call in AIMessage but no corresponding ToolMessage\n* This creates an invalid message sequence\n\n**The solution:**\n\n* Detects AIMessages with tool\\_calls that have no results\n* Creates synthetic ToolMessage responses indicating the call was cancelled\n* Repairs the message history before agent execution\n\n**Why it's useful:**\n\n* Prevents agent confusion from incomplete message chains\n* Gracefully handles interruptions and errors\n* Maintains conversation coherence", "summary": "Describes how the harness fixes message history when tool calls are interrupted, creating synthetic responses to maintain coherence.", "keywords": ["message history", "tool call", "AIMessage", "ToolMessage", "synthetic response", "conversation coherence"]}