{"node_id": "befc3b", "title": "Protocol reference", "path": "backends > Backends > Protocol reference", "content": "Backends must implement the `BackendProtocol`.\n\nRequired endpoints:\n\n* `ls_info(path: str) -> list[FileInfo]`\n  * Return entries with at least `path`. Include `is_dir`, `size`, `modified_at` when available. Sort by `path` for deterministic output.\n* `read(file_path: str, offset: int = 0, limit: int = 2000) -> str`\n  * Return numbered content. On missing file, return `\"Error: File '/x' not found\"`.\n* `grep_raw(pattern: str, path: Optional[str] = None, glob: Optional[str] = None) -> list[GrepMatch] | str`\n  * Return structured matches. For an invalid regex, return a string like `\"Invalid regex pattern: ...\"` (do not raise).\n* `glob_info(pattern: str, path: str = \"/\") -> list[FileInfo]`\n  * Return matched files as `FileInfo` entries (empty list if none).\n* `write(file_path: str, content: str) -> WriteResult`\n  * Create-only. On conflict, return `WriteResult(error=...)`. On success, set `path` and for state backends set `files_update={...}`; external backends should use `files_update=None`.\n* `edit(file_path: str, old_string: str, new_string: str, replace_all: bool = False) -> EditResult`\n  * Enforce uniqueness of `old_string` unless `replace_all=True`. If not found, return error. Include `occurrences` on success.\n\nSupporting types:\n\n* `WriteResult(error, path, files_update)`\n* `EditResult(error, path, files_update, occurrences)`\n* `FileInfo` with fields: `path` (required), optionally `is_dir`, `size`, `modified_at`.\n* `GrepMatch` with fields: `path`, `line`, `text`.\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/oss/deepagents/backends.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://docs.langchain.com/llms.txt", "summary": "Describes the required endpoints and supporting types for implementing the BackendProtocol.", "keywords": ["BackendProtocol", "ls_info", "read", "grep_raw", "glob_info", "write", "edit", "FileInfo", "GrepMatch", "WriteResult", "EditResult"]}