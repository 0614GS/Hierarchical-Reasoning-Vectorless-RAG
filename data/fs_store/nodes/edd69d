{"node_id": "edd69d", "title": "Route to different backends", "path": "backends > Backends > Route to different backends", "content": "Route parts of the namespace to different backends. Commonly used to persist `/memories/*` and keep everything else ephemeral.\n\n```python  theme={null}\nfrom deepagents import create_deep_agent\nfrom deepagents.backends import CompositeBackend, StateBackend, FilesystemBackend\n\ncomposite_backend = lambda rt: CompositeBackend(\n    default=StateBackend(rt),\n    routes={\n        \"/memories/\": FilesystemBackend(root_dir=\"/deepagents/myagent\", virtual_mode=True),\n    },\n)\n\nagent = create_deep_agent(backend=composite_backend)\n```\n\nBehavior:\n\n* `/workspace/plan.md` → StateBackend (ephemeral)\n* `/memories/agent.md` → FilesystemBackend under `/deepagents/myagent`\n* `ls`, `glob`, `grep` aggregate results and show original path prefixes.\n\nNotes:\n\n* Longer prefixes win (for example, route `\"/memories/projects/\"` can override `\"/memories/\"`).\n* For StoreBackend routing, ensure the agent runtime provides a store (`runtime.store`).", "summary": "Route parts of the namespace to different backends, such as persisting `/memories/*` with FilesystemBackend and keeping others ephemeral with StateBackend.", "keywords": ["CompositeBackend", "StateBackend", "FilesystemBackend", "namespace routing", "persist", "ephemeral", "deepagents", "backend", "runtime"]}