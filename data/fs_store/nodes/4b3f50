{"node_id": "4b3f50", "title": "Setup", "path": "long-term-memory > Long-term memory > Setup", "content": "Configure long-term memory by using a `CompositeBackend` that routes the `/memories/` path to a `StoreBackend`:\n\n```python  theme={null}\nfrom deepagents import create_deep_agent\nfrom deepagents.backends import CompositeBackend, StateBackend, StoreBackend\nfrom langgraph.store.memory import InMemoryStore\nfrom langgraph.checkpoint.memory import MemorySaver\n\ncheckpointer = MemorySaver()\n\ndef make_backend(runtime):\n    return CompositeBackend(\n        default=StateBackend(runtime),  # Ephemeral storage\n        routes={\n            \"/memories/\": StoreBackend(runtime)  # Persistent storage\n        }\n    )\n\nagent = create_deep_agent(\n    store=InMemoryStore(),  # Required for StoreBackend\n    backend=make_backend,\n    checkpointer=checkpointer\n)\n```", "summary": "Configure long-term memory using a CompositeBackend that routes specific paths to persistent storage.", "keywords": ["CompositeBackend", "StoreBackend", "StateBackend", "InMemoryStore", "MemorySaver", "create_deep_agent", "Persistent storage", "Ephemeral storage"]}