{"node_id": "7ea9ee", "title": "Filesystem middleware", "path": "middleware > Deep Agents Middleware > Filesystem middleware", "content": "Context engineering is a main challenge in building effective agents. This is particularly difficult when using tools that return variable-length results (for example, web\\_search and RAG), as long tool results can quickly fill your context window.\n\n`FilesystemMiddleware` provides four tools for interacting with both short-term and long-term memory:\n\n* **ls**: List the files in the filesystem\n* **read\\_file**: Read an entire file or a certain number of lines from a file\n* **write\\_file**: Write a new file to the filesystem\n* **edit\\_file**: Edit an existing file in the filesystem\n\n```python  theme={null}\nfrom langchain.agents import create_agent\nfrom deepagents.middleware.filesystem import FilesystemMiddleware\n\n# FilesystemMiddleware is included by default in create_deep_agent\n# You can customize it if building a custom agent\nagent = create_agent(\n    model=\"claude-sonnet-4-5-20250929\",\n    middleware=[\n        FilesystemMiddleware(\n            backend=None,  # Optional: custom backend (defaults to StateBackend)\n            system_prompt=\"Write to the filesystem when...\",  # Optional custom addition to the system prompt\n            custom_tool_descriptions={\n                \"ls\": \"Use the ls tool when...\",\n                \"read_file\": \"Use the read_file tool to...\"\n            }  # Optional: Custom descriptions for filesystem tools\n        ),\n    ],\n)\n```", "summary": "Introduces FilesystemMiddleware for managing short-term and long-term memory in agents, providing tools for file operations.", "keywords": ["Web_search", "fRAG", "context_window", "fFilesystemMiddleware", "fls", "fread_file", "fwrite_file", "fedit_file", "fCompositeBackend", "fStateBackend"]}